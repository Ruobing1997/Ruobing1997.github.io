<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>Design-Pattern | Robin's Blog</title><meta name="author" content="Ruobing Wang"><meta name="copyright" content="Ruobing Wang"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="记录各种 Design Pattern">
<meta property="og:type" content="article">
<meta property="og:title" content="Design-Pattern">
<meta property="og:url" content="http://ruobingw.com/2023/10/24/Design-Pattern/index.html">
<meta property="og:site_name" content="Robin&#39;s Blog">
<meta property="og:description" content="记录各种 Design Pattern">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://ruobingw.com/2023/10/24/Design-Pattern/cover.png">
<meta property="article:published_time" content="2023-10-24T18:39:54.000Z">
<meta property="article:modified_time" content="2023-12-01T21:21:52.858Z">
<meta property="article:author" content="Ruobing Wang">
<meta property="article:tag" content="设计模式">
<meta property="article:tag" content="Design Pattern">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ruobingw.com/2023/10/24/Design-Pattern/cover.png"><link rel="shortcut icon" href="/images/logo.png"><link rel="canonical" href="http://ruobingw.com/2023/10/24/Design-Pattern/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-54HWWM1WE5"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-54HWWM1WE5');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":300},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: 'Just',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: {"limitCount":50,"languages":{"author":"Author: Ruobing Wang","link":"Link: ","source":"Source: Robin's Blog","info":"Copyright is owned by the author. For commercial reprints, please contact the author for authorization. For non-commercial reprints, please indicate the source."}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Design-Pattern',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-12-01 16:21:52'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/config/css/categoryBar.css" type="text/css"><link rel="stylesheet" href="/config/css/nav.css" type="text/css"><meta name="generator" content="Hexo 6.3.0">
<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
<link rel="alternate" href="/atom.xml" title="Robin's Blog" type="application/atom+xml">
</head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/images/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> About</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> Articles</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg fixed" id="page-header" style="background-image: url('/2023/10/24/Design-Pattern/cover.png')"><nav id="nav"><span id="blog-info"><a href="/" title="Robin's Blog"><span class="site-name">Robin's Blog</span></a></span><div id="menus"></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-address-card"></i><span> About</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-book"></i><span> Articles</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></li><li><a class="site-page child" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></li></ul></div></div><center id="name-container"><a id="page-name" href="javascript:scrollToTop()">PAGE_NAME</a></center><div id="nav-right"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i></a></div><div id="toggle-menu"> <a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Design-Pattern</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2023-10-24T18:39:54.000Z" title="Created 2023-10-24 14:39:54">2023-10-24</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2023-12-01T21:21:52.858Z" title="Updated 2023-12-01 16:21:52">2023-12-01</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%B7%A5%E7%A8%8B%E7%B1%BB/">工程类</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Design-Pattern"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post View:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><blockquote>
<div class="note blue icon-padding flat"><i class="note-icon fas fa-tree"></i><blockquote>
<p>见 <a href="/2023/11/19/%E5%89%8D%E7%BD%AE%E7%9F%A5%E8%AF%86/" title="前置知识">前置知识</a> 来复习 </p>
</blockquote>
</div>
</blockquote>
<blockquote>
<p>根据：</p>
<p><a target="_blank" rel="noopener" href="https://refactoring.guru/design-patterns">深入设计模式</a><br>亚历山大 · 什韦茨</p>
<p>进行的个人总结，感谢支持</p>
</blockquote>
<ul>
<li>Creational Pattern<ul>
<li>创建型模式提供了创建对象的机制， 能够提升已有代码的灵活性和可复用性<ul>
<li>Factory Method - 工厂方法<ul>
<li>父类中提供一个创建对象的接口以允许<strong>子类</strong>决定<strong>实例化对象的类型</strong></li>
</ul>
</li>
<li>Abstract Factory - 抽象工厂<ul>
<li>允许创建一系列相关的对象而 「不用」制定其具体类</li>
</ul>
</li>
<li>Builder - 生成器<ul>
<li>分步骤创建复杂对象，允许使用相同的创建代码生成不同类型和形式的对象</li>
</ul>
</li>
<li>Prototype - 原型<ul>
<li>让人能复制已有对象，而又无须使代码依赖他们所属的类</li>
</ul>
</li>
<li>Singleton - 单例<ul>
<li>让你能够保证一个类只有一个实例，并提供一个访问该实例的全局节点</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>Structural Pattern<ul>
<li>结构型模式介绍如何将对象和类组装成较大的结构，并保持结构的灵活和高效</li>
</ul>
</li>
<li>Behavioral Pattern<ul>
<li>行为模式负责对象间的高效沟通和职责委派</li>
</ul>
</li>
</ul>
<h1 id="Creational-Pattern"><a href="#Creational-Pattern" class="headerlink" title="Creational Pattern"></a>Creational Pattern</h1><h2 id="工厂方法-Factory-Method"><a href="#工厂方法-Factory-Method" class="headerlink" title="工厂方法 - Factory Method"></a>工厂方法 - Factory Method</h2><p><img src="/2023/10/24/Design-Pattern/Factory_Method_1.png" alt="Factory_Method_1"></p>
<blockquote>
<p>工厂方法是一种创建型设计模式，其在父类中提供一个创建对象的方法，允许子类决定实例化对象的类型。</p>
</blockquote>
<h3 id="现实问题"><a href="#现实问题" class="headerlink" title="现实问题"></a>现实问题</h3><p>一开始写的代码只支持卡车运输，大部分代码都在卡车类下。一段时间以后，需要支持其他的运输方式，比如海运，那么由于现在的代码几乎都在卡车下，想要实现新的方式就会比较困难。因此不得不大幅度，频繁修改代码，并根据不同的运输对象类在应用中进行不同的处理</p>
<h3 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h3><p>工厂方法建议使用特殊的<strong>工厂方法代替对于对象构造函数的直接调用</strong></p>
<p><img src="/2023/10/24/Design-Pattern/Factory_Method_2.png" alt="Factory_Method_2"></p>
<p>在 子类的createTransport中调用 new 从而返回产品</p>
<p>这样的好处是我们现在可以在子类中重写工厂方法，从而改变其创建产品的类型。</p>
<p>但是，仅当这些产品具有共同的基类或者接口时，子类才可以返回不同类型的产品。同时，基类中的工厂方法还应将返回类型声明为这一公共接口：</p>
<p><img src="/2023/10/24/Design-Pattern/Factory_Method_3.png" alt="Factory_Method_3"></p>
<p>总结：<code>卡车Truck</code> 和 <code>轮船Ship</code> 类都必须实现 <code>运输Trans­port</code> 接口， 该接口声明了一个名为 <code>deliver交付</code> 的方法。 每个类都将以不同的方式实现该方法： 卡车走陆路交付货物， 轮船走海路交付货物。  <code>陆路运输Road­Logis­tics</code>类中的工厂方法返回卡车对象， 而 <code>海路运输Sea­Logis­tics</code>类则返回轮船对象。</p>
<p>这样就可以使得调用工厂部分的代码，即客户端代码 不需要知道不同子类和返回实际对象之间的区别。客户端将所有产品都认为是 抽象的 <code>运输</code> 客户端知道所有运输对象都提供 交付 的方法，但是不需要知道具体是怎么实现的。</p>
<h3 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h3><p><img src="/2023/10/24/Design-Pattern/Factory_Method_4.png" alt="Factory_Method_4"></p>
<p><code>产品 （Prod­uct）</code> 将会对接口进行声明。 对于所有由创建者及其子类构建的对象， 这些接口都是通用的。 </p>
<p><code>具体产品 （Con­crete Prod­ucts</code>） 是产品接口的不同实现。 </p>
<p><code>创建者 （Cre­ator）</code> 类声明返回产品对象的工厂方法。 该方法的返回对象类型必须与产品接口相匹配。<br>你可以将工厂方法声明为抽象方法， 强制要求每个子类以不同方式实现该方法。 或者， 你也可以在基础工厂方法中返回默认产品类型。<br>注意， 尽管它的名字是创建者， 但它最主要的职责并不是创建产品。 一般来说， 创建者类包含一些与产品相关的核心业务逻辑。 工厂方法将这些逻辑处理从具体产品类中分离出来。 打个比方， 大型软件开发公司拥有程序员培训部门。 但是， 这些公司的主要工作还是编写代码， 而非生产程序员。 </p>
<p><code>具体创建者  （Con­crete Cre­ators</code>） 将会重写基础工厂方法， 使其返回不同类型的产品。<br>注意， 并不一定每次调用工厂方法都会创建新的实例。 工厂方法也可以返回缓存、 对象池或其他来源的已有对象。</p>
<h3 id="样例"><a href="#样例" class="headerlink" title="样例"></a>样例</h3><p><img src="/2023/10/24/Design-Pattern/Factory_Method_5.png" alt="Factory_Method_5"></p>
<p>如果使用工厂方法， 就不需要为每种操作系统重写对话框逻辑。 如果我们声明了一个在基本对话框类中生成按钮的工厂方法， 那么我们就可以创建一个对话框子类， 并使其通过工厂方法返回 Win­dows 样式按钮。 子类将继承对话框基础类的大部分代码， 同时在屏幕上根据 Win­dows 样式渲染按钮。 </p>
<p>如需该模式正常工作， 基础对话框类必须使用<strong>抽象</strong>按钮 （例如基类或接口）， <strong>以便将其扩展为具体按钮</strong>。 这样一来， 无论对话框中使用何种类型的按钮， 其代码都可以正常工作。</p>
<p>每向对话框中添加一个新的工厂方法， 你就离<strong>抽象工厂模式</strong>更近一步。</p>
<h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>产品接口 + 产品类：</p>
<p>需要 一个 interface / 基类 product 抽象化从而可以扩展为具体的product</p>
<p>需要 concrete products 来实现具体的功能</p>
<p>工厂接口 + 工厂类：</p>
<p>需要一个Creator 从而让客户端能够调用</p>
<p>需要 concrete creator来返回具体的实例类型</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;创建者类声明的工厂方法必须返回一个产品类的对象。创建者的子类通常会提供</span></span><br><span class="line"><span class="comment">//&nbsp;该方法的实现。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">Dialog</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;创建者还可提供一些工厂方法的默认实现。</span></span><br><span class="line">&nbsp;&nbsp;<span class="keyword">abstract</span>&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;请注意，创建者的主要职责并非是创建产品。其中通常会包含一些核心业务</span></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;逻辑，这些逻辑依赖于由工厂方法返回的产品对象。子类可通过重写工厂方</span></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;法并使其返回不同类型的产品来间接修改业务逻辑。</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">render</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;调用工厂方法创建一个产品对象。</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="type">Button</span>&nbsp;<span class="variable">okButton</span>&nbsp;<span class="operator">=</span>&nbsp;createButton()</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;现在使用产品。</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;okButton.onClick(closeDialog)</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;okButton.render()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;具体创建者将重写工厂方法以改变其所返回的产品类型。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WindowsDialog</span>&nbsp;<span class="keyword">extends</span>&nbsp;<span class="title class_">Dialog</span> “is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WindowsButton</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WebDialog</span>&nbsp;<span class="keyword">extends</span>&nbsp;<span class="title class_">Dialog</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">HTMLButton</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;产品接口中将声明所有具体产品都必须实现的操作。</span></span><br><span class="line"><span class="keyword">interface</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">render</span><span class="params">()</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">onClick</span><span class="params">(f)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;具体产品需提供产品接口的各种实现。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WindowsButton</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">render</span><span class="params">(a,&nbsp;b)</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据&nbsp;Windows&nbsp;样式渲染按钮。</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">onClick</span><span class="params">(f)</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;绑定本地操作系统点击事件。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">HTMLButton</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">render</span><span class="params">(a,&nbsp;b)</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;返回一个按钮的&nbsp;HTML&nbsp;表述。</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">onClick</span><span class="params">(f)</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;绑定网络浏览器的点击事件。</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">Application</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;field dialog:&nbsp;Dialog</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;程序根据当前配置或环境设定选择创建者的类型。</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">initialize</span><span class="params">()</span>&nbsp;<span class="type">is</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">config</span>&nbsp;<span class="operator">=</span>&nbsp;readApplicationConfigFile()</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(config.OS&nbsp;==&nbsp;<span class="string">"Windows"</span>)&nbsp;<span class="type">then</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">dialog</span>&nbsp;<span class="operator">=</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WindowsDialog</span>()</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;(config.OS&nbsp;==&nbsp;<span class="string">"Web"</span>)&nbsp;<span class="type">then</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">dialog</span>&nbsp;<span class="operator">=</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WebDialog</span>()</span><br><span class="line">		<span class="keyword">else</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">Exception</span>(<span class="string">"错误！未知的操作系统。"</span>)</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;当前客户端代码会与具体创建者的实例进行交互，但是必须通过其基本接口</span></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;进行。只要客户端通过基本接口与创建者进行交互，你就可将任何创建者子</span></span><br><span class="line">&nbsp;&nbsp;<span class="comment">//&nbsp;类传递给客户端。</span></span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">main</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="built_in">this</span>.initialize()</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;dialog.render()</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用场景"><a href="#使用场景" class="headerlink" title="使用场景"></a>使用场景</h3><ol>
<li><p>无法预知对象确切类别以及依赖关系</p>
<ol>
<li>工厂方法将创建产品的代码和实际的使用逻辑分离，从而能在不影响其他代码的情况下扩展产品创建部分的代码</li>
<li>例如，如果需要向应用中添加一种新产品，我们现在只需要开发新的创建者子类，然后重写其工厂方法即可</li>
</ol>
</li>
<li><p>需要用户扩展应用库或框架的内部组件</p>
<ol>
<li>将各框架中构造组件的代码集中到单个工厂方法中， 并在继承该组件之外允许任何人对该方法进行重写。 </li>
<li>假设你使用开源 UI 框架编写自己的应用。 你希望在应用中使用圆形按钮， 但是原框架仅支持矩形按钮。 你可以使用 <code>圆形按钮Round­But­ton子类</code>来继承标准的 <code>按钮But­ton</code>类。 但是， 你需要告诉<code> UI框架UIFrame­work类</code>使用新的子类按钮代替默认按钮。<br>为了实现这个功能， 你可以根据基础框架类开发子类 <code>圆形按钮UI UIWith­Round­But­tons</code> ， 并且重写其 <code>create­Button</code>创建按钮方法。 基类中的该方法返回 <code>按钮对象</code>， 而你开发的子类返回 <code>圆形按钮对象</code>。 现在， 你就可以使用 圆形按钮 UI类代替 UI框架类。</li>
</ol>
</li>
<li><p>复用对象，而不是每一次都创建新对象</p>
<ol>
<li><p>比如数据库连接</p>
</li>
<li><p>复用现有对象的方法： </p>
<p>首先， 你需要创建存储空间来存放所有已经创建的对象。<br>当他人请求一个对象时， 程序将在对象池中搜索可用对象。<br>…然后将其返回给客户端代码。<br>如果没有可用对象， 程序则创建一个新对象 （并将其添加到对象池中）</p>
</li>
<li><p>我们需要 一个既能够创建新对象， 又可以重用现有对象的普通方法 – 工厂方法：</p>
<ol>
<li>让所有产品都遵循同一接口。 该接口必须声明对所有产品都有意义的方法。 </li>
<li>在创建类中添加一个空的工厂方法。 该方法的返回类型必须遵循通用的产品接口。 </li>
<li>在创建者代码中找到对于产品构造函数的所有引用。 将它们依次替换为对于工厂方法的调用， 同时将创建产品的代码移入工厂方法。 你可能需要在工厂方法中添加临时参数来控制返回的产品类型。<br>工厂方法的代码看上去可能非常糟糕。 其中可能会有复杂的 switch分支运算符， 用于选择各种需要实例化的产品类。 但是不要担心， 我们很快就会修复这个问题。 </li>
<li>现在， 为工厂方法中的每种产品编写一个创建者子类， 然后在子类中重写工厂方法， 并将基本方法中的相关创建代码移动到工厂方法中。 </li>
<li>如果应用中的产品类型太多， 那么为每个产品创建子类并无太大必要， 这时你也可以在子类中复用基类中的控制参数。<br>例如， 设想你有以下一些层次结构的类。 基类 邮件及其子类 航空邮件和 陆路邮件 ；  运输及其子类 飞机, 卡车和 火车 。  航空邮件仅使用 飞机对象， 而 陆路邮件则会同时使用 卡车和 火车对象。 你可以编写一个新的子类 （例如 火车邮件 ） 来处理这两种情况， 但是还有其他可选的方案。 客户端代码可以给 陆路邮件类传递一个参数， 用于控制其希望获得的产品。 </li>
<li>如果代码经过上述移动后， 基础工厂方法中已经没有任何代码， 你可以将其转变为抽象类。 如果基础工厂方法中还有其他语句， 你可以将其设置为该方法的默认行为</li>
</ol>
</li>
</ol>
</li>
</ol>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 产品接口以及具体的产品类：</span></span><br><span class="line"><span class="comment">// 产品接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">useProduct</span><span class="params">()</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体产品类：AirMail</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AirMail</span> <span class="keyword">implements</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">useProduct</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Using AirMail"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体产品类：LandMail</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LandMail</span> <span class="keyword">implements</span> <span class="title class_">Product</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">useProduct</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Using LandMail"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 工厂类</span></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ProductFactory</span> {</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Product&gt; pool = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 工厂方法</span></span><br><span class="line">    <span class="keyword">public</span> Product <span class="title function_">getProduct</span><span class="params">(String type)</span> {</span><br><span class="line">        <span class="type">Product</span> <span class="variable">product</span> <span class="operator">=</span> pool.get(type);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (product == <span class="literal">null</span>) {</span><br><span class="line">            <span class="comment">// 根据类型创建新产品</span></span><br><span class="line">            <span class="keyword">switch</span> (type) {</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"AirMail"</span>:</span><br><span class="line">                    product = <span class="keyword">new</span> <span class="title class_">AirMail</span>();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="string">"LandMail"</span>:</span><br><span class="line">                    product = <span class="keyword">new</span> <span class="title class_">LandMail</span>();</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">            }</span><br><span class="line">            <span class="keyword">if</span> (product != <span class="literal">null</span>) {</span><br><span class="line">                pool.put(type, product); <span class="comment">// 将新创建的产品添加到池中</span></span><br><span class="line">            }</span><br><span class="line">        }</span><br><span class="line">        <span class="keyword">return</span> product;</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 释放产品实例</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">releaseProduct</span><span class="params">(String type, Product product)</span> {</span><br><span class="line">        pool.put(type, product);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"><span class="comment">// 客户端代码</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ProductFactory</span> <span class="variable">factory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ProductFactory</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取AirMail产品实例</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">airMail</span> <span class="operator">=</span> factory.getProduct(<span class="string">"AirMail"</span>);</span><br><span class="line">        airMail.useProduct();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取LandMail产品实例</span></span><br><span class="line">        <span class="type">Product</span> <span class="variable">landMail</span> <span class="operator">=</span> factory.getProduct(<span class="string">"LandMail"</span>);</span><br><span class="line">        landMail.useProduct();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br></pre></td></tr></tbody></table></figure>

<p><code>ProductFactory</code> 类管理着一个对象池，当请求一个特定类型的产品时，它首先尝试从池中获取。如果池中没有可用的产品实例，则创建一个新的实例并将其添加到池中。这样，当同一类型的产品再次被请求时，可以重用之前创建的实例，而不是每次都创建新的实例。</p>
<p>额外的：工厂方法 后 演变为 抽象工厂，原型，生成器 方法</p>
<h2 id="抽象工厂方法-Abstract-Factory"><a href="#抽象工厂方法-Abstract-Factory" class="headerlink" title="抽象工厂方法 - Abstract Factory"></a>抽象工厂方法 - Abstract Factory</h2><p>其是一种创建型设计模式，它能 <strong>创建一系列相关的对象</strong> 而无需指定具体类</p>
<p><img src="/2023/10/24/Design-Pattern/abstract_factory_1.png" alt="abstract_factory_1"></p>
<h3 id="现实问题-1"><a href="#现实问题-1" class="headerlink" title="现实问题"></a>现实问题</h3><p>假设正在开发一款家具商店模拟器</p>
<p>代码中有一些类：</p>
<ol>
<li>来表示相关产品：椅子，沙发，咖啡桌</li>
<li>系列产品的不同变体。比如 有 现代风格的椅子，或者XX风格的椅子</li>
</ol>
<p><img src="/2023/10/24/Design-Pattern/abstract_factory_2.png" alt="abstract_factory_2"></p>
<p>也就是说对于每一种商品。我们有多种变体。</p>
<p>因此我们需要对于每一种艺术风格，我们都需要设计一种家具对象。并且我们当然<strong>不希望</strong>在添加新产品/风格的时候修改已有的代码。</p>
<h3 id="解决方案-1"><a href="#解决方案-1" class="headerlink" title="解决方案"></a>解决方案</h3><ol>
<li>抽象工厂模式建议为 <strong>系列中的每一件产品</strong> 明确声明接口。然后确保<strong>所有变体</strong>都<strong>继承/实现</strong>这些接口</li>
</ol>
<p>e.g: 所有风格的椅子都实现椅子接口。</p>
<p><img src="/2023/10/24/Design-Pattern/abstract_factory_3.png" alt="abstract_factory_3"></p>
<ol start="2">
<li>然后我们需要一个抽象工厂其包含系列中所有产品构造方法的接口。<code>createChair</code> <code>createSofa</code> <code>createXXX</code>,这些接口都必须返回抽象产品类型也就是 <code>createChair:Chair</code> <code>createSofa:Sofa``createCoffeeTable:CoffeTable</code></li>
</ol>
<p><img src="/2023/10/24/Design-Pattern/abstract_factory_4.png" alt="abstract_factory_4"></p>
<ol start="3">
<li>对于每一个变体，使用<strong>「抽象工厂接口」来创建不同的「工厂类」</strong> 每一个工厂类都只能返回特定类别的产品，比如VictorianFurnitureFactory 返回 Victorian，Modern 返回 Modern</li>
</ol>
<p>这样，客户端就可以通过相应的抽象接口调用工厂和产品类而无需修改客户端代码</p>
<h3 id="结构-1"><a href="#结构-1" class="headerlink" title="结构"></a>结构</h3><p><img src="/2023/10/24/Design-Pattern/abstract_factory_5.png" alt="abstract_factory_5"></p>
<ol>
<li><em>ProductA, ProductB:</em> （Abstract Product 抽象产品） 构成系列产品的一组不同但相关的产品声明接口</li>
<li>Concrete ProductX: (Concrete Product 具体产品) 抽象产品的多种不同类型实现。所有变体（风格，比如维多利亚/现代）都必须实现相应的抽象产品（椅子/沙发）</li>
<li>Abstract Factory 抽象工厂: 接口声明一组创建 <strong>抽象产品</strong>的方法</li>
<li>ConcreteFactoryX 具体工厂：实现抽象工厂的构建方法，每一个具体工厂都生产且仅创建对应产品变体</li>
<li>客户端对于具体产品的初始化，其构建方法签名必须返回相应的 <strong>抽象</strong> 产品。这样，使用工厂类的客户端代码就不会与工厂创建的特定产品变体耦合。客户端只需要通过抽象接口嗲用工厂和产品对象，就能与任何具体工厂/产品变体交互。</li>
</ol>
<h3 id="样例-1"><a href="#样例-1" class="headerlink" title="样例"></a>样例</h3><p><img src="/2023/10/24/Design-Pattern/abstract_factory_6.png" alt="abstract_factory_6"></p>
<p>这个例子通过使用 <strong>抽象工厂</strong> 模式从而使得客户端代码与具体UI类耦合从而创建跨平台的UI元素，同时确保所创建的元素与制定的操作系统匹配。</p>
<p>跨平台应用中的相同 UI 元素功能类似， 但是在不同操作系统下的外观有一定差异。 此外， 你需要确保 UI 元素与当前操作系统风格一致。 你一定不希望在 Win­dows 系统下运行的应用程序中显示 macOS 的控件。 </p>
<p>抽象工厂接口声明一系列构建方法， 客户端代码可调用它们生成不同风格的 UI 元素。 每个具体工厂对应特定操作系统， 并负责生成符合该操作系统风格的 UI 元素。 </p>
<p>其运作方式如下： 应用程序启动后检测当前操作系统。 根据该信息， 应用程序通过与该操作系统对应的类创建工厂对象。 其余代码使用该工厂对象创建 UI 元素。 这样可以避免生成错误类型的元素。 </p>
<p>使用这种方法， 客户端代码只需调用抽象接口， 而无需了解具体工厂类和 UI 元素。 此外， 客户端代码还支持未来添加新的工厂或 UI 元素。 </p>
<p>这样一来， 每次在应用程序中添加新的 UI 元素变体时， 你都无需修改客户端代码。 你只需创建一个能够生成这些 UI 元素的工厂类， 然后稍微修改应用程序的初始代码， 使其能够选择合适的工厂类即可。</p>
<h3 id="总结-1"><a href="#总结-1" class="headerlink" title="总结"></a>总结</h3><p>伪代码</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//&nbsp;抽象工厂接口声明了一组能返回不同抽象产品的方法。这些产品属于同一个系列</span></span><br><span class="line"><span class="comment">//&nbsp;且在高层主题或概念上具有相关性。同系列的产品通常能相互搭配使用。系列产</span></span><br><span class="line"><span class="comment">//&nbsp;品可有多个变体，但不同变体的产品不能搭配使用。</span></span><br><span class="line"><span class="keyword">interface</span>&nbsp;<span class="title class_">GUIFactory</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createCheckbox</span><span class="params">()</span>:Checkbox</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;具体工厂可生成属于同一变体的系列产品。工厂会确保其创建的产品能相互搭配</span></span><br><span class="line"><span class="comment">//&nbsp;使用。具体工厂方法签名会返回一个抽象产品，但在方法内部则会对具体产品进</span></span><br><span class="line"><span class="comment">//&nbsp;行实例化。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WinFactory</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">GUIFactory</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WinButton</span>()</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createCheckbox</span><span class="params">()</span>:Checkbox&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WinCheckbox</span>()</span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;每个具体工厂中都会包含一个相应的产品变体。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">MacFactory</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">GUIFactory</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createButton</span><span class="params">()</span>:Button&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">MacButton</span>()</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createCheckbox</span><span class="params">()</span>:Checkbox&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">return</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">MacCheckbox</span>()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;系列产品中的特定产品必须有一个基础接口。所有产品变体都必须实现这个接口。</span></span><br><span class="line"><span class="keyword">interface</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;具体产品由相应的具体工厂创建。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WinButton</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据&nbsp;Windows&nbsp;样式渲染按钮。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">MacButton</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Button</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据&nbsp;macOS&nbsp;样式渲染按钮</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;这是另一个产品的基础接口。所有产品都可以互动，但是只有相同具体变体的产</span></span><br><span class="line"><span class="comment">//&nbsp;品之间才能够正确地进行交互。</span></span><br><span class="line"><span class="keyword">interface</span>&nbsp;<span class="title class_">Checkbox</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">WinCheckbox</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Checkbox</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据&nbsp;Windows&nbsp;样式渲染复选框。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">MacCheckbox</span>&nbsp;<span class="keyword">implements</span>&nbsp;<span class="title class_">Checkbox</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">//&nbsp;根据&nbsp;macOS&nbsp;样式渲染复选框。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;客户端代码仅通过抽象类型（GUIFactory、Button&nbsp;和&nbsp;Checkbox）使用工厂</span></span><br><span class="line"><span class="comment">//&nbsp;和产品。这让你无需修改任何工厂或产品子类就能将其传递给客户端代码。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">Application</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;field factory:&nbsp;GUIFactory</span><br><span class="line">&nbsp;&nbsp;<span class="keyword">private</span>&nbsp;field button:&nbsp;Button</span><br><span class="line">&nbsp;&nbsp;constructor&nbsp;<span class="title function_">Application</span><span class="params">(factory:&nbsp;GUIFactory)</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="built_in">this</span>.factory&nbsp;=&nbsp;factory</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">createUI</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="built_in">this</span>.button&nbsp;=&nbsp;factory.createButton()</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">paint</span><span class="params">()</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;button.paint()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//&nbsp;程序会根据当前配置或环境设定选择工厂类型，并在运行时创建工厂（通常在初</span></span><br><span class="line"><span class="comment">//&nbsp;始化阶段）。</span></span><br><span class="line"><span class="keyword">class</span>&nbsp;<span class="title class_">ApplicationConfigurator</span>&nbsp;is</span><br><span class="line">&nbsp;&nbsp;method&nbsp;<span class="title function_">main</span><span class="params">()</span>&nbsp;<span class="type">is</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">config</span>&nbsp;<span class="operator">=</span>&nbsp;readApplicationConfigFile()</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">if</span>&nbsp;(config.OS&nbsp;==&nbsp;<span class="string">"Windows"</span>)&nbsp;<span class="type">then</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">factory</span>&nbsp;<span class="operator">=</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">WinFactory</span>()</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span>&nbsp;<span class="keyword">if</span>&nbsp;(config.OS&nbsp;==&nbsp;<span class="string">"Mac"</span>)&nbsp;<span class="type">then</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="variable">factory</span>&nbsp;<span class="operator">=</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">MacFactory</span>()</span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">else</span></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="keyword">throw</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">Exception</span>(<span class="string">"错误！未知的操作系统。"</span>)</span><br><span class="line"></span><br><span class="line">&nbsp;&nbsp;&nbsp;&nbsp;<span class="type">Application</span>&nbsp;<span class="variable">app</span>&nbsp;<span class="operator">=</span>&nbsp;<span class="keyword">new</span>&nbsp;<span class="title class_">Application</span>(factory)</span><br></pre></td></tr></tbody></table></figure>

<p>实际的java code例子：</p>
<p>在这个例子中，我们创建一个关于电子产品的简单场景。</p>
<p>假设有两类产品：手机和平板电脑，分别有不同的品牌（例如：苹果和三星）。我们将实现抽象工厂和具体工厂来创建这些产品。</p>
<p>在这个例子中，<code>ElectronicsFactory</code> 是一个抽象工厂接口，定义了创建智能手机和平板电脑的方法。<code>AppleFactory</code> 和 <code>SamsungFactory</code> 是具体的工厂实现，分别创建苹果和三星品牌的产品。客户端代码依赖于抽象工厂和产品接口，而不是具体的实现类，这使得增加新的产品品牌（例如添加一个华为工厂）时，无需修改客户端代码。</p>
<figure class="highlight java"><table><tbody><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 抽象产品</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Smartphone</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">Tablet</span> {</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体产品</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleSmartphone</span> <span class="keyword">implements</span> <span class="title class_">Smartphone</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Apple Smartphone"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SamsungSmartphone</span> <span class="keyword">implements</span> <span class="title class_">Smartphone</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Samsung Smartphone"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleTablet</span> <span class="keyword">implements</span> <span class="title class_">Tablet</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Apple Tablet"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SamsungTablet</span> <span class="keyword">implements</span> <span class="title class_">Tablet</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">display</span><span class="params">()</span> {</span><br><span class="line">        System.out.println(<span class="string">"Samsung Tablet"</span>);</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 抽象工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">ElectronicsFactory</span> {</span><br><span class="line">    Smartphone <span class="title function_">createSmartphone</span><span class="params">()</span>;</span><br><span class="line">    Tablet <span class="title function_">createTablet</span><span class="params">()</span>;</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="comment">// 具体工厂</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppleFactory</span> <span class="keyword">implements</span> <span class="title class_">ElectronicsFactory</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Smartphone <span class="title function_">createSmartphone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AppleSmartphone</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Tablet <span class="title function_">createTablet</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">AppleTablet</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SamsungFactory</span> <span class="keyword">implements</span> <span class="title class_">ElectronicsFactory</span> {</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Smartphone <span class="title function_">createSmartphone</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SamsungSmartphone</span>();</span><br><span class="line">    }</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> Tablet <span class="title function_">createTablet</span><span class="params">()</span> {</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">SamsungTablet</span>();</span><br><span class="line">    }</span><br><span class="line">}</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 客户端</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Client</span> {</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> {</span><br><span class="line">        <span class="type">ElectronicsFactory</span> <span class="variable">appleFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AppleFactory</span>();</span><br><span class="line">        <span class="type">Smartphone</span> <span class="variable">appleSmartphone</span> <span class="operator">=</span> appleFactory.createSmartphone();</span><br><span class="line">        <span class="type">Tablet</span> <span class="variable">appleTablet</span> <span class="operator">=</span> appleFactory.createTablet();</span><br><span class="line"></span><br><span class="line">        appleSmartphone.display();</span><br><span class="line">        appleTablet.display();</span><br><span class="line"></span><br><span class="line">        <span class="type">ElectronicsFactory</span> <span class="variable">samsungFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SamsungFactory</span>();</span><br><span class="line">        <span class="type">Smartphone</span> <span class="variable">samsungSmartphone</span> <span class="operator">=</span> samsungFactory.createSmartphone();</span><br><span class="line">        <span class="type">Tablet</span> <span class="variable">samsungTablet</span> <span class="operator">=</span> samsungFactory.createTablet();</span><br><span class="line"></span><br><span class="line">        samsungSmartphone.display();</span><br><span class="line">        samsungTablet.display();</span><br><span class="line">    }</span><br><span class="line">}</span><br></pre></td></tr></tbody></table></figure>

<h3 id="使用场景-1"><a href="#使用场景-1" class="headerlink" title="使用场景"></a>使用场景</h3><ol>
<li>代码需要与多个不同系列的相关产品交互，但是我们无法预先获取相关信息，不希望代码对于产品具体类进行构建<ol>
<li>抽象工厂的接口可以用于创建么个系列产品的对象，只要代码通过该接口创建对象。</li>
</ol>
</li>
<li>有一个基于一组抽象方法的类，且其主要功能因此变得不明确<ol>
<li>好的代码需要：每个类仅负责一件事，如果一个类与多个类型产品交互，那么我们可以考虑将工厂方法抽取到独立的工厂类或具备完整功能的抽象公差那个类</li>
</ol>
</li>
</ol>
<h3 id="实现方式"><a href="#实现方式" class="headerlink" title="实现方式"></a>实现方式</h3><ol>
<li><strong>以不同的产品类型与产品变体为维度绘制矩阵</strong>：<ul>
<li>在示例中，我们有两种产品类型：<code>Smartphone</code> 和 <code>Tablet</code>（抽象产品接口），这构成了矩阵的一维。</li>
<li>另一维是产品变体，即不同品牌：<code>Apple</code> 和 <code>Samsung</code>。每个品牌都有其对应的智能手机和平板电脑产品。</li>
</ul>
</li>
<li><strong>为所有产品声明抽象产品接口，并且让所有具体产品类实现这些接口</strong>：<ul>
<li>抽象产品接口为 <code>Smartphone</code> 和 <code>Tablet</code>。具体产品类如 <code>AppleSmartphone</code>, <code>SamsungSmartphone</code>, <code>AppleTablet</code>, <code>SamsungTablet</code> 实现了这些接口。</li>
</ul>
</li>
<li><strong>声明抽象工厂接口，并且在接口中为所有抽象产品提供一组构建方法</strong>：<ul>
<li>抽象工厂接口是 <code>ElectronicsFactory</code>，它定义了创建智能手机和平板电脑的方法（<code>createSmartphone()</code> 和 <code>createTablet()</code>）。</li>
</ul>
</li>
<li><strong>为每种产品变体实现一个具体工厂类</strong>：<ul>
<li>具体工厂类为 <code>AppleFactory</code> 和 <code>SamsungFactory</code>，每个工厂类都实现了 <code>ElectronicsFactory</code> 接口，并能创建特定品牌的智能手机和平板电脑。</li>
</ul>
</li>
<li><strong>在应用程序中开发初始化代码，根据应用程序配置或当前环境对特定具体工厂类进行初始化，并将该工厂对象传递给所有需要创建产品的类</strong>：<ul>
<li>客户端代码 (<code>Client</code> 类) 演示了如何根据需要选择并初始化具体工厂（例如 <code>AppleFactory</code> 或 <code>SamsungFactory</code>），并使用这些工厂来创建产品。</li>
</ul>
</li>
<li><strong>找出代码中所有对产品构造函数的直接调用，将其替换为对工厂对象中相应构建方法的调用</strong>：<ul>
<li>在客户端代码中，不直接使用产品的构造函数来创建产品实例。相反，它调用工厂对象的 <code>createSmartphone()</code> 和 <code>createTablet()</code> 方法来获取产品实例。</li>
</ul>
</li>
</ol>
<p>抽象工厂和桥接（bridge） 可以搭配使用，如果由桥接定义的抽象只能与特定实现合作， 这一模式搭配就非常有用。 在这种情况下， 抽象工厂可以对这些关系进行封装， 并且对客户端代码隐藏其复杂性。</p>
<h1 id="Behavioral-Pattern"><a href="#Behavioral-Pattern" class="headerlink" title="Behavioral Pattern"></a>Behavioral Pattern</h1><p><img src="/2023/10/24/Design-Pattern/Mediator_Structure.png" alt="Mediator_Structure"></p>
<h1 id="Structural-Pattern"><a href="#Structural-Pattern" class="headerlink" title="Structural Pattern"></a>Structural Pattern</h1><h2 id="Adapter-Pattern"><a href="#Adapter-Pattern" class="headerlink" title="Adapter Pattern"></a>Adapter Pattern</h2><p>使一个老的方案通过<code>adapter</code>来实现新的方案</p>
<p><img src="/2023/10/24/Design-Pattern/adapter_guru_1.png" alt="adapter_guru_1"></p>
<h2 id="解决的问题："><a href="#解决的问题：" class="headerlink" title="解决的问题："></a>解决的问题：</h2><p>当想要整合老旧方案到一个新的方案时，在不修改老方案的内容的情况下，使用adapter：</p>
<p>A special object that converts the interface of one object so that another object can understand it.</p>
<h2 id="Decorator"><a href="#Decorator" class="headerlink" title="Decorator"></a>Decorator</h2><p><strong>Decorator</strong>  lets you attach new behaviors to objects by placing these objects inside special wrapper objects that contain the behaviors.</p>
<p><img src="/2023/10/24/Design-Pattern/decorator-2x.png" alt="decorator-2x"></p>
<p>四个组成：</p>
<ol>
<li>Componenet Interface<ol>
<li>interface for the objects that will have additional features added to them.</li>
</ol>
</li>
<li>Concrete Component <ol>
<li>basic implementation of the component interface.</li>
</ol>
</li>
<li>Decorator<ol>
<li>abstract class implementing the component interface and holding a reference to a component object.</li>
</ol>
</li>
<li>Concrete Decorators<ol>
<li>These are implementations of the decorator that add specific behaviors or states to the component.</li>
</ol>
</li>
</ol>
<h2 id="解决的问题：-1"><a href="#解决的问题：-1" class="headerlink" title="解决的问题："></a>解决的问题：</h2></article><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">设计模式</a><a class="post-meta__tags" href="/tags/Design-Pattern/">Design Pattern</a></div><div class="post_share"></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2023/11/01/Trie%E6%A0%91/" title="Trie树"><img class="cover" src="/2023/11/01/Trie%E6%A0%91/Trie_Cover.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">Trie树</div></div></a></div><div class="next-post pull-right"><a href="/2023/10/24/%E5%85%AB%E8%82%A1%E6%96%87/" title="八股文"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">八股文</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/images/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Ruobing Wang</div><div class="author-info__description">Work Hard, Player Harder</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">48</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">49</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">5</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ruobing1997"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Ruobing1997" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="https://www.linkedin.com/in/robin97/" target="_blank" title="Linkedin"><i class="fab fa-linkedin"></i></a><a class="social-icon" href="https://www.instagram.com/ruobingwang123/" target="_blank" title="Instagram"><i class="fab fa-instagram"></i></a><a class="social-icon" href="mailto:ruobing2@andrew.cmu.edu" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Catalog</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Creational-Pattern"><span class="toc-number">1.</span> <span class="toc-text">Creational Pattern</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95-Factory-Method"><span class="toc-number">1.1.</span> <span class="toc-text">工厂方法 - Factory Method</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E5%AE%9E%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.1.</span> <span class="toc-text">现实问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">1.1.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84"><span class="toc-number">1.1.3.</span> <span class="toc-text">结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B"><span class="toc-number">1.1.4.</span> <span class="toc-text">样例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">1.1.5.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.6.</span> <span class="toc-text">使用场景</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%96%B9%E6%B3%95-Abstract-Factory"><span class="toc-number">1.2.</span> <span class="toc-text">抽象工厂方法 - Abstract Factory</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%8E%B0%E5%AE%9E%E9%97%AE%E9%A2%98-1"><span class="toc-number">1.2.1.</span> <span class="toc-text">现实问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">解决方案</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%93%E6%9E%84-1"><span class="toc-number">1.2.3.</span> <span class="toc-text">结构</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B7%E4%BE%8B-1"><span class="toc-number">1.2.4.</span> <span class="toc-text">样例</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%80%BB%E7%BB%93-1"><span class="toc-number">1.2.5.</span> <span class="toc-text">总结</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-1"><span class="toc-number">1.2.6.</span> <span class="toc-text">使用场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%96%B9%E5%BC%8F"><span class="toc-number">1.2.7.</span> <span class="toc-text">实现方式</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Behavioral-Pattern"><span class="toc-number">2.</span> <span class="toc-text">Behavioral Pattern</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Structural-Pattern"><span class="toc-number">3.</span> <span class="toc-text">Structural Pattern</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Adapter-Pattern"><span class="toc-number">3.1.</span> <span class="toc-text">Adapter Pattern</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A"><span class="toc-number">3.2.</span> <span class="toc-text">解决的问题：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Decorator"><span class="toc-number">3.3.</span> <span class="toc-text">Decorator</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E7%9A%84%E9%97%AE%E9%A2%98%EF%BC%9A-1"><span class="toc-number">3.4.</span> <span class="toc-text">解决的问题：</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2023/10/24/Design-Pattern/" title="Design-Pattern"><img src="/2023/10/24/Design-Pattern/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Design-Pattern"/></a><div class="content"><a class="title" href="/2023/10/24/Design-Pattern/" title="Design-Pattern">Design-Pattern</a><time datetime="2023-12-01T21:21:52.858Z" title="Updated 2023-12-01 16:21:52">2023-12-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2023/10/11/Re-%E4%BB%8E1500%E5%88%86%E5%BC%80%E5%A7%8B%E7%9A%84%E7%AB%9E%E8%B5%9B%E7%94%9F%E6%B4%BB/" title="Re:从1500分开始的竞赛生活"><img src="/2023/10/11/Re-%E4%BB%8E1500%E5%88%86%E5%BC%80%E5%A7%8B%E7%9A%84%E7%AB%9E%E8%B5%9B%E7%94%9F%E6%B4%BB/cover.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Re:从1500分开始的竞赛生活"/></a><div class="content"><a class="title" href="/2023/10/11/Re-%E4%BB%8E1500%E5%88%86%E5%BC%80%E5%A7%8B%E7%9A%84%E7%AB%9E%E8%B5%9B%E7%94%9F%E6%B4%BB/" title="Re:从1500分开始的竞赛生活">Re:从1500分开始的竞赛生活</a><time datetime="2023-11-28T21:38:27.644Z" title="Updated 2023-11-28 16:38:27">2023-11-28</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Ruobing Wang</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Switch Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between single-column and double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><div class="js-pjax"></div><script type="text/javascript" src="https://cdn1.tianli0.top/npm/jquery@latest/dist/jquery.min.js"></script><script async src="/config/js/categoryBar.js"></script><script src="/js/nav.js"></script><script defer="defer" id="fluttering_ribbon" mobile="true" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-fluttering-ribbon.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/metingjs/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">Search</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  Loading the Database</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>